{"ast":null,"code":"var _jsxFileName = \"/home/jose/Proyect_mision/src/componentes/Ventas.js\";\nimport React from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport fireDb from \"../firebase\";\nimport { Table, Button, Container, Modal, ModalHeader, ModalBody, FormGroup, ModalFooter } from \"reactstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass Ventas extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: [],\n      modalEditar: false,\n      modalInsertar: false,\n      form: {\n        codigo: \"\",\n        producto: \"\",\n        precio: \"\"\n      },\n      id: 0\n    };\n\n    this.peticionGet = () => {\n      fireDb.child(\"ventas\").on(\"value\", venta => {\n        if (venta.val() !== null) {\n          this.setState({ ...this.state.data,\n            data: venta.val()\n          });\n        } else {\n          this.setState({\n            data: []\n          });\n        }\n      });\n    };\n\n    this.peticionPost = () => {\n      console.log(this.state.form);\n      fireDb.child(\"ventas\").push(this.state.form, error => {\n        if (error) console.log(error);\n      });\n      this.setState({\n        modalInsertar: false\n      });\n    };\n\n    this.peticionPut = () => {\n      fireDb.child(`ventas/${this.state.id}`).set(this.state.form, error => {\n        if (error) console.log(error);\n      });\n      this.setState({\n        modalEditar: false\n      });\n    };\n\n    this.peticionDelete = () => {\n      if (window.confirm(`EstÃ¡s seguro que deseas eliminar la venta ${this.state.form && this.state.form.codigo}?`)) {\n        fireDb.child(`ventas/${this.state.id}`).remove(error => {\n          if (error) console.log(error);\n        });\n      }\n    };\n\n    this.handleChange = e => {\n      this.setState({\n        form: { ...this.state.form,\n          [e.target.name]: e.target.value\n        }\n      });\n      console.log(this.state.form);\n    };\n\n    this.seleccionarVenta = async (venta, id, caso) => {\n      await this.setState({\n        form: venta,\n        id: id\n      });\n      caso === \"Editar\" ? this.setState({\n        modalEditar: true\n      }) : this.peticionDelete();\n    };\n  }\n\n  componentDidMount() {\n    this.peticionGet();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Container, {\n        children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          color: \"success\",\n          onClick: () => this.setState({\n            modalInsertar: true\n          }),\n          children: \"Nueva venta\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Table, {\n          className: \"table table-bordered\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Codigo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Producto\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Precio\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Acci\\xF3n\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: Object.keys(this.state.data).map(i => {\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: this.state.data[i].codigo\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 103,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: this.state.data[i].producto\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 104,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: this.state.data[i].precio\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [/*#__PURE__*/_jsxDEV(Button, {\n                    color: \"primary\",\n                    onClick: () => this.seleccionarVenta(this.state.data[i], i, 'Editar'),\n                    children: \"Editar\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 107,\n                    columnNumber: 21\n                  }, this), \" \", /*#__PURE__*/_jsxDEV(Button, {\n                    color: \"danger\",\n                    onClick: () => this.seleccionarVenta(this.state.data[i], i, 'Eliminar'),\n                    children: \"Eliminar\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 108,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 106,\n                  columnNumber: 19\n                }, this)]\n              }, i, true, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 24\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        isOpen: this.state.modalEditar,\n        children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Editar Registro\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 12\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n          children: [/*#__PURE__*/_jsxDEV(FormGroup, {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Codigo:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"form-control\",\n              name: \"codigo\",\n              type: \"number\",\n              onChange: this.handleChange,\n              value: this.state.form && this.state.form.codigo\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Producto:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"form-control\",\n              name: \"producto\",\n              type: \"text\",\n              onChange: this.handleChange,\n              value: this.state.form && this.state.form.producto\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Precio:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"form-control\",\n              name: \"precio\",\n              type: \"number\",\n              onChange: this.handleChange,\n              value: this.state.form && this.state.form.precio\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            color: \"primary\",\n            onClick: () => this.peticionPut(),\n            children: \"Editar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            color: \"danger\",\n            onClick: () => this.setState({\n              modalEditar: false\n            }),\n            children: \"Cancelar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        isOpen: this.state.modalInsertar,\n        children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Insertar Venta\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 12\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n          children: [/*#__PURE__*/_jsxDEV(FormGroup, {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Codigo:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"form-control\",\n              name: \"codigo\",\n              type: \"number\",\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Producto:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"form-control\",\n              name: \"producto\",\n              type: \"text\",\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Precio:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"form-control\",\n              name: \"precio\",\n              type: \"number\",\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            color: \"primary\",\n            onClick: () => this.peticionPost(),\n            children: \"Insertar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            className: \"btn btn-danger\",\n            onClick: () => this.setState({\n              modalInsertar: false\n            }),\n            children: \"Cancelar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nexport default Ventas;","map":{"version":3,"sources":["/home/jose/Proyect_mision/src/componentes/Ventas.js"],"names":["React","fireDb","Table","Button","Container","Modal","ModalHeader","ModalBody","FormGroup","ModalFooter","Ventas","Component","state","data","modalEditar","modalInsertar","form","codigo","producto","precio","id","peticionGet","child","on","venta","val","setState","peticionPost","console","log","push","error","peticionPut","set","peticionDelete","window","confirm","remove","handleChange","e","target","name","value","seleccionarVenta","caso","componentDidMount","render","Object","keys","map","i"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport fireDb from \"../firebase\"\nimport {\n  Table,\n  Button,\n  Container,\n  Modal,\n  ModalHeader,\n  ModalBody,\n  FormGroup,\n  ModalFooter,\n} from \"reactstrap\";\n\n\nclass Ventas extends React.Component {\n  state = {\n    data: [],\n    modalEditar: false,\n    modalInsertar: false,\n    form: {\n      codigo: \"\",\n      producto: \"\",\n      precio: \"\",\n    },\n    id:0\n  };\n  peticionGet = () => {\n    fireDb.child(\"ventas\").on(\"value\", (venta) => {\n      if (venta.val() !== null) {\n        this.setState({ ...this.state.data, data: venta.val() });\n      } else {\n        this.setState({ data: [] });\n      }\n    });\n  };\n  peticionPost=()=>{\n    console.log(this.state.form)\n    fireDb.child(\"ventas\").push(this.state.form,\n      error=>{\n        if(error)console.log(error)\n      });\n      this.setState({modalInsertar: false});\n  }\n  peticionPut=()=>{\n    fireDb.child(`ventas/${this.state.id}`).set(\n      this.state.form,\n      error=>{\n        if(error)console.log(error)\n      });\n      this.setState({modalEditar: false});\n  }\n  peticionDelete=()=>{\n    if(window.confirm(`EstÃ¡s seguro que deseas eliminar la venta ${this.state.form && this.state.form.codigo}?`))\n    {\n    fireDb.child(`ventas/${this.state.id}`).remove(\n      error=>{\n        if(error)console.log(error)\n      });\n    }\n  }\n  handleChange=e=>{\n    this.setState({form:{\n      ...this.state.form,\n      [e.target.name]: e.target.value\n    }})\n    console.log(this.state.form);\n  }\n  seleccionarVenta=async(venta,id,caso)=>{\n\n    await this.setState({form: venta, id: id});\n\n    (caso===\"Editar\")?this.setState({modalEditar: true}):\n    this.peticionDelete()\n\n  }\n  componentDidMount(){\n    this.peticionGet();\n  }\n  render() {\n    \n    return (\n      <>\n        <Container>\n        <br />\n          <Button color=\"success\" onClick={()=>this.setState({modalInsertar: true})}>Nueva venta</Button>\n          <br />\n          <br />\n          <Table className=\"table table-bordered\">\n            <thead>\n              <tr>\n                <th>Codigo</th>\n                <th>Producto</th>\n                <th>Precio</th>\n                <th>AcciÃ³n</th>\n              </tr>\n            </thead>\n\n            <tbody>\n            {Object.keys(this.state.data).map(i => {\n                return <tr key={i}>\n                  \n                  <td>{this.state.data[i].codigo}</td>\n                  <td>{this.state.data[i].producto}</td>\n                  <td>{this.state.data[i].precio}</td>\n                  <td>\n                    <Button color=\"primary\" onClick={() => this.seleccionarVenta(this.state.data[i],i,'Editar')}>Editar</Button>{\" \"}\n                    <Button color=\"danger\" onClick={()=> this.seleccionarVenta(this.state.data[i],i,'Eliminar')}>Eliminar</Button>\n                  </td>\n\n                </tr>\n               })}\n            </tbody>\n          </Table>\n        </Container>\n\n        <Modal isOpen={this.state.modalEditar}>\n          <ModalHeader>\n           <div><h3>Editar Registro</h3></div>\n          </ModalHeader>\n\n          <ModalBody>\n            <FormGroup>\n              <label>\n               Codigo:\n              </label>\n            \n              <input\n                className=\"form-control\"        \n                name=\"codigo\"\n                type=\"number\"\n                onChange={this.handleChange}\n                value={this.state.form && this.state.form.codigo}\n              />\n            </FormGroup>\n            \n            <FormGroup>\n              <label>\n                Producto: \n              </label>\n              <input\n                className=\"form-control\"\n                name=\"producto\"\n                type=\"text\"\n                onChange={this.handleChange}\n                value={this.state.form && this.state.form.producto}\n              />\n            </FormGroup>\n            \n            <FormGroup>\n              <label>\n                Precio: \n              </label>\n              <input\n                className=\"form-control\"\n                name=\"precio\"\n                type=\"number\"\n                onChange={this.handleChange}\n                value={this.state.form && this.state.form.precio}\n              />\n            </FormGroup>\n          </ModalBody>\n\n          <ModalFooter>\n            <Button\n              color=\"primary\"\n              onClick={() => this.peticionPut()}\n            >\n              Editar\n            </Button>\n            <Button\n              color=\"danger\"\n              onClick={() => this.setState({modalEditar: false})}\n            >\n              Cancelar\n            </Button>\n          </ModalFooter>\n        </Modal>\n\n\n\n        <Modal isOpen={this.state.modalInsertar}>\n          <ModalHeader>\n           <div><h3>Insertar Venta</h3></div>\n          </ModalHeader>\n\n          <ModalBody>\n            <FormGroup>\n              <label>\n                Codigo: \n              </label>\n              \n              <input\n                className=\"form-control\"\n                name=\"codigo\"\n                type=\"number\"\n                onChange={this.handleChange}\n              />\n            </FormGroup>\n            \n            <FormGroup>\n              <label>\n                Producto: \n              </label>\n              <input\n                className=\"form-control\"\n                name=\"producto\"\n                type=\"text\"\n                onChange={this.handleChange}\n              />\n            </FormGroup>\n            \n            <FormGroup>\n              <label>\n                Precio: \n              </label>\n              <input\n                className=\"form-control\"\n                name=\"precio\"\n                type=\"number\"\n                onChange={this.handleChange}\n              />\n            </FormGroup>\n          </ModalBody>\n\n          <ModalFooter>\n            <Button\n              color=\"primary\"\n              onClick={() => this.peticionPost()}\n            >\n              Insertar\n            </Button>\n            <Button\n              className=\"btn btn-danger\"\n              onClick={() => this.setState({modalInsertar: false})}\n            >\n              Cancelar\n            </Button>\n          </ModalFooter>\n        </Modal>\n      </>\n    );\n  }\n}\nexport default Ventas;"]},"metadata":{},"sourceType":"module"}